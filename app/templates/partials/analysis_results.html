<div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
    <h2 style="margin-bottom: 0;">{{ analysis.title }}</h2>
    <button class="outline" style="margin-bottom: 0; width: auto;"
            hx-post="/api/analysis/{{ analysis.id }}/save"
            hx-target="#save-status"
            hx-swap="innerHTML">
        Save Analysis
    </button>
    <span id="save-status"></span>
</div>

<!-- Tab bar -->
<div class="analysis-tabs" role="tablist" aria-label="Analysis sections">
    <button role="tab" aria-selected="false" aria-controls="tab-preprocessing"
            data-tab="preprocessing" class="tab-btn">Pre-Processing</button>
    <button role="tab" aria-selected="false" aria-controls="tab-eda"
            data-tab="eda" class="tab-btn">EDA</button>
    <button role="tab" aria-selected="true" aria-controls="tab-clusters"
            data-tab="clusters" class="tab-btn active">Cluster Descriptions</button>
    <button role="tab" aria-selected="false" aria-controls="tab-segmentation"
            data-tab="segmentation" class="tab-btn">Cluster Plots</button>
</div>

<!-- Tab panels â€” all rendered inline, toggled via JS -->
<div id="tab-preprocessing" role="tabpanel" class="tab-panel" style="display: none;">
    {% include "partials/section_preprocessing.html" %}
</div>

<div id="tab-eda" role="tabpanel" class="tab-panel" style="display: none;">
    {% include "partials/section_eda.html" %}
</div>

<div id="tab-clusters" role="tabpanel" class="tab-panel">
    {% include "partials/section_clusters.html" %}
</div>

<div id="tab-segmentation" role="tabpanel" class="tab-panel" style="display: none;">
    {% include "partials/section_segmentation.html" %}
</div>
